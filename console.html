<html>
<head>
<style>

body{
  padding:0px;
  margin:0px;
  
  background:rgb(245,245,245);
  color:rgb(40,40,40);
  
  font-size:0px;
  font-family:helvetica, arial;
  
  -webkit-overflow-scrolling: touch;
}

article{
  display:block;
  
  margin:0px auto;
  max-width:700px;
}

article h1{
  font-size:30px;
  font-weight:bold;
  text-align:center;
  
  margin:60px 0px;
  padding:0px;
}
article h2{
  font-size:19px;
  font-weight:bold;
  text-transform:uppercase;
  
  margin:6px 0px;
  padding:0px;
}
article h2+p{
  margin-top:0px;
}
article p{
  font-size:17px;
  font-weight:300;
  
  margin:35px 0px;
  padding:0px;
}

playground{
  display:block;
  position:relative;
  
  background:rgb(230,230,230);
  font-family:'Cousine', helvetica;
}
playground .table{
  display:table;
  width:100%;
}
playground line{
  display:table-row;
}
playground line.running{
  background:#769A79;
  color:rgb(245,245,245);
}
playground line:first-of-type num{
  padding-top:12px;
}
playground line:last-of-type num{
  padding-bottom:12px;
}
playground line num{
  display:table-cell;
  padding:0px 20px 0px 12px;
  width:1px;
  
  font-size:14px;
  line-height:23px;
  white-space:nowrap;
  
  background:rgb(238,238,238);
  color:rgb(80,80,80);
  
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}
playground line.error num{
  color:rgb(233,30,99);
}
playground line text,
playground line bytecode{
  display:table-cell;
  padding:0px 12px 0px 8px;
  
  font-size:16px;
  line-height:23px;
}
playground line bytecode{
  display:none;
  width:1px;
}
playground.showByteCode line bytecode{
  display:table-cell;
}
playground line error{
  display:table-cell;
  width:1px;
  
  font-size:14px;
  line-height:23px;
  white-space:nowrap;
  text-align:right;
  
  padding-right:12px;
  
  color:rgb(233,30,99);
}

playground .menu{
  position:block;
  
  background:rgb(225,225,225);
  
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}
playground .menu item{
  display:inline-block;
  vertical-align:top;
  
  font-size:12px;
  padding:6px 12px;
  
  background:rgb(215,215,215);
  border-right:1px solid rgb(225,225,225);
  
  cursor:pointer;
}
playground .menu item:hover{
  background:rgb(202,202,202);
}

playground .info{
  position:block;
  
  background:rgb(225,225,225);
  
  text-align:center;
}
playground .info .item{
  display:inline-block;
  vertical-align:top;
  
  font-size:12px;
  padding:6px 12px;
}
playground .info .accumulator::before{
  content:'Accumulator Value: ';
}

simulator playground line num{
  background:rgb(255,255,255);
}
simulator playground{
  background:rgb(245,245,245);
}

simulator{
  display:none;
  
  position:fixed;
  top:0px;
  left:0px;
  width:100%;
  height:100%;
  
  background:rgb(96,125,139);
}
simulator.shown{
  display:block;
}

simulator .horilayout{
  display:flex;
  flex-flow:row;
  width:100%;
  height:100%;
}

simulator .vertlayout{
  flex:2;
  
  display:flex;
  flex-flow:column;
  width:100%;
  height:100%;
}
simulator .vertlayout .code{
  background:rgb(245,245,245);
  overflow:scroll;
  max-height:50%;
}
simulator .vertlayout .visual{
  flex:2;
  position:relative;
  
  margin:50px;
  
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}
simulator .vertlayout .visual svg{
  display:block;
  
  position:absolute;
  top:0px;
  left:0px;
  width:100%;
  height:100%;
}
simulator .vertlayout .visual img{
  display:block;
  
  position:absolute;
  top:0px;
  left:0px;
  width:100%;
  height:100%;
  
  object-fit:contain;
}

simulator .graph{
  display:flex;
  flex-flow:row;
  
  min-width:8px;
  max-width:50%;
  
  width:450px;
  height:100%;
  
  background:rgb(245,245,245);
}

simulator .graph .divider{
  width:8px;
  height:100%;
  position:relative;
  
  background:rgb(255,255,255);
  
  cursor:ew-resize;
  
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}
simulator .graph .divider div{
  position:absolute;
  top:50%;
  left:50%;
  
  margin-left:-1.5px;
  margin-top:-1.5px;
}
simulator .graph .divider div,
simulator .graph .divider div::after,
simulator .graph .divider div::before{
  height:3px;
  width:3px;
  
  border-radius:50%;
  background:rgb(180,180,180);
}
simulator .graph .divider div::after,
simulator .graph .divider div::before{
  display:block;
  content:'';
}
simulator .graph .divider div::after{
  position:absolute;
  
  top:-8px;
}
simulator .graph .divider div::before{
  position:absolute;
  
  top:8px;
}

simulator .graph .processes{
  flex:2;
  
  overflow:scroll;
  position:relative;
}

simulator .processes group{
  display:block;
  
  margin:8px 0px;
}
simulator .processes h1,
simulator .processes h2{
  font-size:13px;
}
simulator .processes h1{
  font-weight:700;
  
  margin:0px 9px;
  cursor:pointer;
}
simulator .processes h2{
  font-weight:300;
  
  border-left:1px solid rgb(200,200,200);
  
  position:relative;
  padding:4px 0px 4px 8px;
  margin:0px 12px;
}
simulator .processes h2:last-child:after{
  content:'';
  display:block;
  
  height:1px;
  width:4px;
  
  background:rgb(200,200,200);
  
  position:absolute;
  bottom:0px;
  left:0px;
}

simulator .processes triangle{
  display:inline-block;
  margin-right:8px;
  
  width:0;
  height:0;
  border-style:solid;
  border-width:6.9px 4px 0 4px;
  border-color:rgb(160,160,160) transparent transparent transparent;
}
simulator .processes group:not(.collapsed) h1:hover triangle{
  border-color:rgb(80,80,80) transparent transparent transparent;
}
simulator .processes group.collapsed h1:hover triangle{
  border-color:transparent transparent transparent rgb(80,80,80);
}
simulator .processes group.collapsed triangle{
  border-color:transparent transparent transparent rgb(160,160,160);
  border-width:4px 0px 4px 6.9px;
  
  margin-left:1.9px;
}
simulator .processes group.collapsed h2{
  display:none;
}

simulator .processes:empty:after{
  content:'Micro Program Log';
  display:block;
  
  font-size:16px;
  color:rgb(180,180,180);
  
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%, -50%);
}

simulator catalog{
  background:none;
}
playground catalog{
  display:table;
}
catalog{
  display:none;
  width:100%;
  max-width:700px;
  margin:0px auto;
  
  border-spacing:10px 6px;
  background:rgb(238,238,238);
}
catalog item:first-child{
  font-weight:bold;
}
catalog item{
  display:table-row;
}
catalog cmd,
catalog byte,
catalog text{
  display:table-cell;
  font-size:10px;
}
catalog cmd,
catalog byte{
  width:1px;
  white-space:nowrap;
}
catalog item:not(.noparam) cmd:after{
  content:' {n}';
  
  color:rgb(180,180,180);
}

</style>

<title>Nybble</title>

<script src='./simulator/scripts/wire.js'></script>
<script src='./simulator/scripts/pingroup.js'></script>
<script src='./simulator/scripts/pinconnector.js'></script>
<script src='./simulator/scripts/binarypingroup.js'></script>
<script src='./simulator/scripts/register.js'></script>
<script src='./simulator/scripts/ram.js'></script>
<script src='./simulator/scripts/incrementor.js'></script>
<script src='./simulator/scripts/controlunit.js'></script>
<script src='./simulator/scripts/bus.js'></script>
<script src='./simulator/scripts/alu.js'></script>
<script src='./simulator/scripts/simulator.js'></script>

<script src='./playgrounds/scripts/catalog.js'></script>
<script src='./playgrounds/scripts/interpreter.js'></script>

<link href='https://fonts.googleapis.com/css?family=Cousine:400,700' rel='stylesheet' type='text/css'>

</head>
<body>
  
  
<catalog>
  <item class='noparam'>
    <cmd>Command</cmd>
    <byte>Code</byte>
    <text>Explanation</text>
  </item>
  <item>
    <cmd>LOAD</cmd>
    <byte>00000</byte>
    <text>Adds the provided number to the accumulator</text>
  </item>
  <item>
    <cmd>STORE</cmd>
    <byte>00001</byte>
    <text>Adds the provided number to the accumulator</text>
  </item>
  <item>
    <cmd>ADD</cmd>
    <byte>00010</byte>
    <text>Adds the provided number to the accumulator</text>
  </item>
  <item>
    <cmd>SUB</cmd>
    <byte>00011</byte>
    <text>Subtracts the provided number from the accumulator</text>
  </item>
  <item>
    <cmd>MUL</cmd>
    <byte>00100</byte>
    <text>Multiplies the provided number against the accumulator</text>
  </item>
  <item>
    <cmd>DIV</cmd>
    <byte>00101</byte>
    <text>Divides the accumulator by the provided number</text>
  </item>
  <item>
    <cmd>MOD</cmd>
    <byte>00110</byte>
    <text>Sets the accumulator to the accumulator modulo provided number</text>
  </item>
  <item>
    <cmd>CMP</cmd>
    <byte>00111</byte>
    <text>Sets the ALU flags from the comparison of provided number compared to accumulator</text>
  </item>
  <item>
    <cmd>LSHIFT</cmd>
    <byte>01000</byte>
    <text>Left-shifts the accumulator based on the provided number</text>
  </item>
  <item>
    <cmd>RSHIFT</cmd>
    <byte>01001</byte>
    <text>Right-shifts the accumulator based on the provided number</text>
  </item>
  <item>
    <cmd>AND</cmd>
    <byte>01010</byte>
    <text>Sets the accumulator to the provided number bitwise-and the accumulator</text>
  </item>
  <item>
    <cmd>OR</cmd>
    <byte>01011</byte>
    <text>Sets the accumulator to the provided number bitwise-or the accumulator</text>
  </item>
  <item class='noparam'>
    <cmd>NOT</cmd>
    <byte>01100</byte>
    <text>Sets the accumulator to the bitwise-not of the accumulator</text>
  </item>
  <item>
    <cmd>XOR</cmd>
    <byte>01101</byte>
    <text>Sets the accumulator to the provided number bitwise-xor the accumulator</text>
  </item>
  <item>
    <cmd>JUMP</cmd>
    <byte>01110</byte>
    <text>Jumps execution to the provided RAM address</text>
  </item>
  <item>
    <cmd>JUMPGT</cmd>
    <byte>01111</byte>
    <text>Jumps execution to the provided RAM address only if the ALU gt flag is on</text>
  </item>
  <item>
    <cmd>JUMPEQ</cmd>
    <byte>10000</byte>
    <text>Jumps execution to the provided RAM address only if the ALU eq flag is on</text>
  </item>
  <item>
    <cmd>JUMPLT</cmd>
    <byte>10001</byte>
    <text>Jumps execution to the provided RAM address only if the ALU gt and eq flags are off</text>
  </item>
  <item class='noparam'>
    <cmd>END</cmd>
    <byte>11111</byte>
    <text>Ends all execution</text>
  </item>
</catalog>


<article>
  <h1>How does a computer really work?</h1>
  <h2>assembly language</h2>
  <p>Lets start with some basic (very basic) computer code</p>
  
  <playground>
    <line>ADD 1</line>
    <line>MUL 2</line>
    <line>CMP 32</line>
    <line>JUMPEQ 5</line>
    <line>JUMP 1</line>
    <line>END</line>
  </playground>
  
  <p>What does this do exactly? Lets look at the parts. It adds 1, the compares that value to 20. If it is equal to 20 it ends the program, if not it repeats.</p>
</article>


<simulator>
  <div class='horilayout'>
    <div class='vertlayout'>
      <div class='visual'>
      
        <img src='./simulator/images/visual/assets/components.png'/>
      
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid" width="1797.158" height="1117.753" viewBox="0 0 1797.158 1117.753">
          <defs>
            <style>
            .cls-1 {
              fill: #000;
              fill-rule: evenodd;
            }
            </style>
          </defs>
          <g>
            <g id='ramaddset'>
              <path d="M1373.876,217.642 L1373.876,213.953 L1607.773,213.953 L1607.773,217.642 L1373.876,217.642 Z" class="cls-1"/>
            </g>
            <g id='ramenable'>
              <path d="M1373.876,494.319 L1373.876,490.630 L1607.773,490.630 L1607.773,494.319 L1373.876,494.319 Z" class="cls-1"/>
            </g>
            <g id='ramset'>
              <path d="M1607.773,479.563 L1607.773,483.252 L1373.876,483.252 L1373.876,479.563 L1607.773,479.563 Z" class="cls-1"/>
            </g>
            <g id='instructionset'>
              <path d="M1283.120,883.880 L1279.431,883.880 L1279.431,606.465 L1283.120,606.465 L1283.120,883.880 Z" class="cls-1"/>
            </g>
            <g id='flagsset'>
              <path d="M579.952,424.227 L579.952,420.538 L663.329,420.538 L663.329,424.227 L579.952,424.227 Z" class="cls-1"/>
            </g>
            <g id='aluoutenable'>
              <path d="M483.294,824.855 L479.605,824.855 L479.605,647.782 L483.294,647.782 L483.294,824.855 Z" class="cls-1"/>
              <path d="M481.818,649.258 L481.818,645.569 L629.388,645.569 L629.388,649.258 L481.818,649.258 Z" class="cls-1"/>
              <path d="M630.863,647.782 L627.174,647.782 L627.174,581.380 L630.863,581.380 L630.863,647.782 Z" class="cls-1"/>
              <path d="M629.388,582.855 L629.388,579.166 L663.329,579.166 L663.329,582.855 L629.388,582.855 Z" class="cls-1"/>
              <path d="M481.818,822.642 L481.818,826.331 L378.520,826.331 L378.520,822.642 L481.818,822.642 Z" class="cls-1"/>
            </g>
            <g id='aluoutset'>
              <path d="M378.520,815.264 L378.520,811.575 L470.751,811.575 L470.751,815.264 L378.520,815.264 Z" class="cls-1"/>
              <path d="M472.226,813.788 L468.537,813.788 L468.537,636.715 L472.226,636.715 L472.226,813.788 Z" class="cls-1"/>
              <path d="M470.751,638.191 L470.751,634.502 L618.320,634.502 L618.320,638.191 L470.751,638.191 Z" class="cls-1"/>
              <path d="M619.796,636.715 L616.106,636.715 L616.106,570.312 L619.796,570.312 L619.796,636.715 Z" class="cls-1"/>
              <path d="M618.320,571.788 L618.320,568.099 L663.329,568.099 L663.329,571.788 L618.320,571.788 Z" class="cls-1"/>
            </g>
            <g id='tempset'>
              <path d="M275.959,230.184 L279.648,230.184 L279.648,271.502 L275.959,271.502 L275.959,230.184 Z" class="cls-1"/>
              <path d="M278.910,272.977 L278.910,269.288 L663.329,269.288 L663.329,272.977 L278.910,272.977 Z" class="cls-1"/>
            </g>
            <g id='accset'>
              <path d="M421.315,230.184 L425.004,230.184 L425.004,260.434 L421.315,260.434 L421.315,230.184 Z" class="cls-1"/>
              <path d="M423.528,261.910 L423.528,258.221 L663.329,258.221 L663.329,261.910 L423.528,261.910 Z" class="cls-1"/>
            </g>
            <g id='tempipset'>
              <path d="M830.082,838.136 L826.393,838.136 L826.393,606.465 L830.082,606.465 L830.082,838.136 Z" class="cls-1"/>
            </g>
            <g id='ipset'>
              <path d="M763.676,606.465 L767.365,606.465 L767.365,678.032 L763.676,678.032 L763.676,606.465 Z" class="cls-1"/>
            </g>
            <g id='ipenable'>
              <path d="M756.297,678.032 L752.608,678.032 L752.608,606.465 L756.297,606.465 L756.297,678.032 Z" class="cls-1"/>
            </g>
            <g id='increnable'>
              <path d="M698.580,838.136 L694.891,838.136 L694.891,606.465 L698.580,606.465 L698.580,838.136 Z" class="cls-1"/>
            </g>
            <g id='incr128'>
              <path d="M729.735,944.380 L729.735,940.691 L796.141,940.691 L796.141,944.380 L729.735,944.380 Z" class="cls-1"/>
            </g>
            <g id='incr64'>
              <path d="M796.141,929.623 L796.141,933.312 L729.735,933.312 L729.735,929.623 L796.141,929.623 Z" class="cls-1"/>
            </g>
            <g id='incr32'>
              <path d="M729.735,922.245 L729.735,918.556 L796.141,918.556 L796.141,922.245 L729.735,922.245 Z" class="cls-1"/>
            </g>
            <g id='incr16'>
              <path d="M796.141,907.489 L796.141,911.178 L729.735,911.178 L729.735,907.489 L796.141,907.489 Z" class="cls-1"/>
            </g>
            <g id='incr8'>
              <path d="M729.735,889.044 L729.735,885.355 L796.141,885.355 L796.141,889.044 L729.735,889.044 Z" class="cls-1"/>
            </g>
            <g id='incr4'>
              <path d="M796.141,896.422 L796.141,900.111 L729.735,900.111 L729.735,896.422 L796.141,896.422 Z" class="cls-1"/>
            </g>
            <g id='incr2'>
              <path d="M729.735,877.977 L729.735,874.288 L796.141,874.288 L796.141,877.977 L729.735,877.977 Z" class="cls-1"/>
            </g>
            <g id='incr1'>
              <path d="M796.141,863.221 L796.141,866.910 L729.735,866.910 L729.735,863.221 L796.141,863.221 Z" class="cls-1"/>
            </g>
            <g id='flagsregister1'>
              <path d="M580.452,466.011 L580.452,462.324 L664.454,462.324 L664.454,466.011 L580.452,466.011 Z" class="cls-1"/>
            </g>
            <g id='flagsregister2'>
              <path d="M664.454,473.385 L664.454,477.072 L580.452,477.072 L580.452,473.385 L664.454,473.385 Z" class="cls-1"/>
            </g>
            <g id='flagsregister4'>
              <path d="M580.452,488.133 L580.452,484.446 L664.454,484.446 L664.454,488.133 L580.452,488.133 Z" class="cls-1"/>
            </g>
            <g id='flagsregister8'>
              <path d="M664.454,495.508 L664.454,499.195 L580.452,499.195 L580.452,495.508 L664.454,495.508 Z" class="cls-1"/>
            </g>
            <g id='flagsregister16'>
              <path d="M580.452,510.256 L580.452,506.569 L664.454,506.569 L664.454,510.256 L580.452,510.256 Z" class="cls-1"/>
            </g>
            <g id='flagsregister32'>
              <path d="M664.454,517.630 L664.454,521.317 L580.452,521.317 L580.452,517.630 L664.454,517.630 Z" class="cls-1"/>
            </g>
            <g id='aluflags1'>
              <path d="M429.431,465.544 L429.431,461.855 L513.546,461.855 L513.546,465.544 L429.431,465.544 Z" class="cls-1"/>
            </g>
            <g id='aluflags2'>
              <path d="M513.546,472.922 L513.546,476.611 L429.431,476.611 L429.431,472.922 L513.546,472.922 Z" class="cls-1"/>
            </g>
            <g id='aluflags4'>
              <path d="M513.546,483.989 L513.546,487.678 L429.431,487.678 L429.431,483.989 L513.546,483.989 Z" class="cls-1"/>
            </g>
            <g id='aluflags8'>
              <path d="M429.431,498.745 L429.431,495.056 L513.546,495.056 L513.546,498.745 L429.431,498.745 Z" class="cls-1"/>
            </g>
            <g id='aluflags16'>
              <path d="M513.546,506.123 L513.546,509.812 L429.431,509.812 L429.431,506.123 L513.546,506.123 Z" class="cls-1"/>
            </g>
            <g id='aluflags32'>
              <path d="M429.431,520.880 L429.431,517.191 L513.546,517.191 L513.546,520.880 L429.431,520.880 Z" class="cls-1"/>
            </g>
            <g id='alucontrol1'>
              <path d="M663.329,323.886 L663.329,327.575 L429.431,327.575 L429.431,323.886 L663.329,323.886 Z" class="cls-1"/>
            </g>
            <g id='alucontrol2'>
              <path d="M429.431,338.642 L429.431,334.953 L663.329,334.953 L663.329,338.642 L429.431,338.642 Z" class="cls-1"/>
            </g>
            <g id='alucontrol4'>
              <path d="M663.329,346.020 L663.329,349.709 L429.431,349.709 L429.431,346.020 L663.329,346.020 Z" class="cls-1"/>
            </g>
            <g id='alucontrol8'>
              <path d="M429.431,360.776 L429.431,357.087 L663.329,357.087 L663.329,360.776 L429.431,360.776 Z" class="cls-1"/>
            </g>
            <g id='temp1'>
              <path d="M261.940,305.441 L258.251,305.441 L258.251,230.184 L261.940,230.184 L261.940,305.441 Z" class="cls-1"/>
            </g>
            <g id='temp2'>
              <path d="M247.183,230.184 L250.872,230.184 L250.872,305.441 L247.183,305.441 L247.183,230.184 Z" class="cls-1"/>
            </g>
            <g id='temp4'>
              <path d="M239.804,305.441 L236.115,305.441 L236.115,230.184 L239.804,230.184 L239.804,305.441 Z" class="cls-1"/>
            </g>
            <g id='temp8'>
              <path d="M225.047,230.184 L228.737,230.184 L228.737,305.441 L225.047,305.441 L225.047,230.184 Z" class="cls-1"/>
            </g>
            <g id='temp16'>
              <path d="M217.669,305.441 L213.980,305.441 L213.980,230.184 L217.669,230.184 L217.669,305.441 Z" class="cls-1"/>
            </g>
            <g id='temp32'>
              <path d="M202.912,230.184 L206.601,230.184 L206.601,305.441 L202.912,305.441 L202.912,230.184 Z" class="cls-1"/>
            </g>
            <g id='temp64'>
              <path d="M195.533,305.441 L191.844,305.441 L191.844,230.184 L195.533,230.184 L195.533,305.441 Z" class="cls-1"/>
            </g>
            <g id='temp128'>
              <path d="M180.777,230.184 L184.466,230.184 L184.466,305.441 L180.777,305.441 L180.777,230.184 Z" class="cls-1"/>
            </g>
            <g id='acc1'>
              <path d="M409.509,305.441 L405.820,305.441 L405.820,230.184 L409.509,230.184 L409.509,305.441 Z" class="cls-1"/>
            </g>
            <g id='acc2'>
              <path d="M398.442,305.441 L394.752,305.441 L394.752,230.184 L398.442,230.184 L398.442,305.441 Z" class="cls-1"/>
            </g>
            <g id='acc4'>
              <path d="M383.684,230.184 L387.374,230.184 L387.374,305.441 L383.684,305.441 L383.684,230.184 Z" class="cls-1"/>
            </g>
            <g id='acc8'>
              <path d="M376.306,305.441 L372.617,305.441 L372.617,230.184 L376.306,230.184 L376.306,305.441 Z" class="cls-1"/>
            </g>
            <g id='acc16'>
              <path d="M365.238,305.441 L361.549,305.441 L361.549,230.184 L365.238,230.184 L365.238,305.441 Z" class="cls-1"/>
            </g>
            <g id='acc32'>
              <path d="M350.481,230.184 L354.171,230.184 L354.171,305.441 L350.481,305.441 L350.481,230.184 Z" class="cls-1"/>
            </g>
            <g id='acc64'>
              <path d="M343.103,305.441 L339.414,305.441 L339.414,230.184 L343.103,230.184 L343.103,305.441 Z" class="cls-1"/>
            </g>
            <g id='acc128'>
              <path d="M328.346,230.184 L332.035,230.184 L332.035,305.441 L328.346,305.441 L328.346,230.184 Z" class="cls-1"/>
            </g>
            <g id='aluout1'>
              <path d="M332.035,748.123 L335.724,748.123 L335.724,786.489 L332.035,786.489 L332.035,748.123 Z" class="cls-1"/>
            </g>
            <g id='aluout2'>
              <path d="M324.657,786.489 L320.968,786.489 L320.968,748.123 L324.657,748.123 L324.657,786.489 Z" class="cls-1"/>
            </g>
            <g id='aluout4'>
              <path d="M309.900,748.123 L313.589,748.123 L313.589,786.489 L309.900,786.489 L309.900,748.123 Z" class="cls-1"/>
            </g>
            <g id='aluout8'>
              <path d="M302.521,786.489 L298.832,786.489 L298.832,748.123 L302.521,748.123 L302.521,786.489 Z" class="cls-1"/>
            </g>
            <g id='aluout16'>
              <path d="M287.765,748.123 L291.454,748.123 L291.454,786.489 L287.765,786.489 L287.765,748.123 Z" class="cls-1"/>
            </g>
            <g id='aluout32'>
              <path d="M280.386,786.489 L276.697,786.489 L276.697,748.123 L280.386,748.123 L280.386,786.489 Z" class="cls-1"/>
            </g>
            <g id='aluout64'>
              <path d="M265.629,748.123 L269.318,748.123 L269.318,786.489 L265.629,786.489 L265.629,748.123 Z" class="cls-1"/>
            </g>
            <g id='aluout128'>
              <path d="M258.251,786.489 L254.561,786.489 L254.561,748.123 L258.251,748.123 L258.251,786.489 Z" class="cls-1"/>
            </g>
            <g id='instruction1'>
              <path d="M1232.209,883.880 L1228.520,883.880 L1228.520,606.465 L1232.209,606.465 L1232.209,883.880 Z" class="cls-1"/>
            </g>
            <g id='instruction2'>
              <path d="M1217.452,606.465 L1221.141,606.465 L1221.141,883.880 L1217.452,883.880 L1217.452,606.465 Z" class="cls-1"/>
            </g>
            <g id='instruction4'>
              <path d="M1210.073,883.880 L1206.384,883.880 L1206.384,606.465 L1210.073,606.465 L1210.073,883.880 Z" class="cls-1"/>
            </g>
            <g id='instruction8'>
              <path d="M1195.317,606.465 L1199.006,606.465 L1199.006,883.880 L1195.317,883.880 L1195.317,606.465 Z" class="cls-1"/>
            </g>
            <g id='instruction16'>
              <path d="M1187.938,883.880 L1184.249,883.880 L1184.249,606.465 L1187.938,606.465 L1187.938,883.880 Z" class="cls-1"/>
            </g>
            <g id='ramadd1'>
              <path d="M1763.459,264.861 L1767.148,264.861 L1767.148,305.441 L1763.459,305.441 L1763.459,264.861 Z" class="cls-1"/>
            </g>
            <g id='ramadd2'>
              <path d="M1756.080,305.441 L1752.391,305.441 L1752.391,264.861 L1756.080,264.861 L1756.080,305.441 Z" class="cls-1"/>
            </g>
            <g id='ramadd4'>
              <path d="M1741.323,264.861 L1745.013,264.861 L1745.013,305.441 L1741.323,305.441 L1741.323,264.861 Z" class="cls-1"/>
            </g>
            <g id='ramadd8'>
              <path d="M1733.945,305.441 L1730.256,305.441 L1730.256,264.861 L1733.945,264.861 L1733.945,305.441 Z" class="cls-1"/>
            </g>
            <g id='ramadd16'>
              <path d="M1719.188,264.861 L1722.877,264.861 L1722.877,305.441 L1719.188,305.441 L1719.188,264.861 Z" class="cls-1"/>
            </g>
            <g id='ramadd32'>
              <path d="M1711.809,305.441 L1708.120,305.441 L1708.120,264.861 L1711.809,264.861 L1711.809,305.441 Z" class="cls-1"/>
            </g>
            <g id='ramadd64'>
              <path d="M1697.052,264.861 L1700.742,264.861 L1700.742,305.441 L1697.052,305.441 L1697.052,264.861 Z" class="cls-1"/>
            </g>
            <g id='ramadd128'>
              <path d="M1689.674,305.441 L1685.985,305.441 L1685.985,264.861 L1689.674,264.861 L1689.674,305.441 Z" class="cls-1"/>
            </g>
            <g id='instbus1'>
              <path d="M1678.606,1027.752 L1674.917,1027.752 L1674.917,942.904 L1678.606,942.904 L1678.606,1027.752 Z" class="cls-1"/>
              <path d="M1230.733,1029.227 L1230.733,1025.538 L1676.393,1025.538 L1676.393,1029.227 L1230.733,1029.227 Z" class="cls-1"/>
              <path d="M1228.520,950.282 L1232.209,950.282 L1232.209,1027.752 L1228.520,1027.752 L1228.520,950.282 Z" class="cls-1"/>
            </g>
            <g id='instbus2'>
              <path d="M1663.849,942.904 L1667.539,942.904 L1667.539,1016.684 L1663.849,1016.684 L1663.849,942.904 Z" class="cls-1"/>
              <path d="M1665.325,1014.471 L1665.325,1018.160 L1219.665,1018.160 L1219.665,1014.471 L1665.325,1014.471 Z" class="cls-1"/>
              <path d="M1221.141,1016.684 L1217.452,1016.684 L1217.452,950.282 L1221.141,950.282 L1221.141,1016.684 Z" class="cls-1"/>
            </g>
            <g id='instbus4'>
              <path d="M1656.471,1005.617 L1652.782,1005.617 L1652.782,942.904 L1656.471,942.904 L1656.471,1005.617 Z" class="cls-1"/>
              <path d="M1208.598,1007.093 L1208.598,1003.404 L1654.258,1003.404 L1654.258,1007.093 L1208.598,1007.093 Z" class="cls-1"/>
              <path d="M1206.384,950.282 L1210.073,950.282 L1210.073,1005.617 L1206.384,1005.617 L1206.384,950.282 Z" class="cls-1"/>
            </g>
            <g id='instbus8'>
              <path d="M1645.403,994.550 L1641.714,994.550 L1641.714,942.904 L1645.403,942.904 L1645.403,994.550 Z" class="cls-1"/>
              <path d="M1643.190,992.337 L1643.190,996.026 L1197.530,996.026 L1197.530,992.337 L1643.190,992.337 Z" class="cls-1"/>
              <path d="M1199.006,994.550 L1195.317,994.550 L1195.317,950.282 L1199.006,950.282 L1199.006,994.550 Z" class="cls-1"/>
            </g>
            <g id='instbus16'>
              <path d="M1634.336,983.483 L1630.646,983.483 L1630.646,942.904 L1634.336,942.904 L1634.336,983.483 Z" class="cls-1"/>
              <path d="M1186.462,984.959 L1186.462,981.270 L1632.122,981.270 L1632.122,984.959 L1186.462,984.959 Z" class="cls-1"/>
              <path d="M1184.249,950.282 L1187.938,950.282 L1187.938,983.483 L1184.249,983.483 L1184.249,950.282 Z" class="cls-1"/>
            </g>
            <g id='databus1'>
              <path d="M1763.459,942.904 L1767.148,942.904 L1767.148,1116.288 L1763.459,1116.288 L1763.459,942.904 Z" class="cls-1"/>
              <path d="M2.218,3.678 L2.218,-0.011 L1764.935,-0.011 L1764.935,3.678 L2.218,3.678 Z" class="cls-1"/>
              <path d="M3.693,1116.288 L0.004,1116.288 L0.004,2.203 L3.693,2.203 L3.693,1116.288 Z" class="cls-1"/>
              <path d="M1764.935,1114.075 L1764.935,1117.764 L2.218,1117.764 L2.218,1114.075 L1764.935,1114.075 Z" class="cls-1"/>
              <path d="M1767.148,167.471 L1763.459,167.471 L1763.459,2.203 L1767.148,2.203 L1767.148,167.471 Z" class="cls-1"/>
              <path d="M332.035,852.892 L335.724,852.892 L335.724,1116.288 L332.035,1116.288 L332.035,852.892 Z" class="cls-1"/>
              <path d="M261.940,163.782 L258.251,163.782 L258.251,2.203 L261.940,2.203 L261.940,163.782 Z" class="cls-1"/>
              <path d="M405.820,2.203 L409.509,2.203 L409.509,163.782 L405.820,163.782 L405.820,2.203 Z" class="cls-1"/>
              <path d="M990.933,700.904 L990.933,704.593 L796.141,704.593 L796.141,700.904 L990.933,700.904 Z" class="cls-1"/>
              <path d="M992.408,1116.288 L988.719,1116.288 L988.719,703.117 L992.408,703.117 L992.408,1116.288 Z" class="cls-1"/>
              <path d="M529.778,704.593 L529.778,700.904 L729.735,700.904 L729.735,704.593 L529.778,704.593 Z" class="cls-1"/>
              <path d="M531.254,1116.288 L527.565,1116.288 L527.565,703.117 L531.254,703.117 L531.254,1116.288 Z" class="cls-1"/>
              <path d="M990.933,863.221 L990.933,866.910 L862.547,866.910 L862.547,863.221 L990.933,863.221 Z" class="cls-1"/>
              <path d="M663.329,863.221 L663.329,866.910 L529.778,866.910 L529.778,863.221 L663.329,863.221 Z" class="cls-1"/>
            </g>
            <g id='databus2'>
              <path d="M1756.080,1105.221 L1752.391,1105.221 L1752.391,942.904 L1756.080,942.904 L1756.080,1105.221 Z" class="cls-1"/>
              <path d="M1753.867,11.056 L1753.867,14.745 L13.285,14.745 L13.285,11.056 L1753.867,11.056 Z" class="cls-1"/>
              <path d="M14.761,1105.221 L11.072,1105.221 L11.072,13.270 L14.761,13.270 L14.761,1105.221 Z" class="cls-1"/>
              <path d="M13.285,1106.697 L13.285,1103.008 L1753.867,1103.008 L1753.867,1106.697 L13.285,1106.697 Z" class="cls-1"/>
              <path d="M1756.080,167.471 L1752.391,167.471 L1752.391,13.270 L1756.080,13.270 L1756.080,167.471 Z" class="cls-1"/>
              <path d="M324.657,1105.221 L320.968,1105.221 L320.968,852.892 L324.657,852.892 L324.657,1105.221 Z" class="cls-1"/>
              <path d="M247.183,13.270 L250.872,13.270 L250.872,163.782 L247.183,163.782 L247.183,13.270 Z" class="cls-1"/>
              <path d="M398.442,163.782 L394.752,163.782 L394.752,13.270 L398.442,13.270 L398.442,163.782 Z" class="cls-1"/>
              <path d="M977.652,714.184 L981.341,714.184 L981.341,1105.221 L977.652,1105.221 L977.652,714.184 Z" class="cls-1"/>
              <path d="M796.141,715.660 L796.141,711.971 L979.865,711.971 L979.865,715.660 L796.141,715.660 Z" class="cls-1"/>
              <path d="M538.633,714.184 L542.322,714.184 L542.322,1105.221 L538.633,1105.221 L538.633,714.184 Z" class="cls-1"/>
              <path d="M729.735,711.971 L729.735,715.660 L540.846,715.660 L540.846,711.971 L729.735,711.971 Z" class="cls-1"/>
              <path d="M862.547,877.977 L862.547,874.288 L979.865,874.288 L979.865,877.977 L862.547,877.977 Z" class="cls-1"/>
              <path d="M540.846,877.977 L540.846,874.288 L663.329,874.288 L663.329,877.977 L540.846,877.977 Z" class="cls-1"/>
            </g>
            <g id='databus4'>
              <path d="M1741.323,942.904 L1745.013,942.904 L1745.013,1094.154 L1741.323,1094.154 L1741.323,942.904 Z" class="cls-1"/>
              <path d="M24.353,25.812 L24.353,22.123 L1742.799,22.123 L1742.799,25.812 L24.353,25.812 Z" class="cls-1"/>
              <path d="M25.829,1094.154 L22.139,1094.154 L22.139,24.337 L25.829,24.337 L25.829,1094.154 Z" class="cls-1"/>
              <path d="M1742.799,1091.941 L1742.799,1095.630 L24.353,1095.630 L24.353,1091.941 L1742.799,1091.941 Z" class="cls-1"/>
              <path d="M1741.323,24.337 L1745.013,24.337 L1745.013,167.471 L1741.323,167.471 L1741.323,24.337 Z" class="cls-1"/>
              <path d="M309.900,852.892 L313.589,852.892 L313.589,1094.154 L309.900,1094.154 L309.900,852.892 Z" class="cls-1"/>
              <path d="M239.804,163.782 L236.115,163.782 L236.115,24.337 L239.804,24.337 L239.804,163.782 Z" class="cls-1"/>
              <path d="M383.684,24.337 L387.374,24.337 L387.374,163.782 L383.684,163.782 L383.684,24.337 Z" class="cls-1"/>
              <path d="M968.797,723.038 L968.797,726.727 L796.141,726.727 L796.141,723.038 L968.797,723.038 Z" class="cls-1"/>
              <path d="M970.273,1094.154 L966.584,1094.154 L966.584,725.252 L970.273,725.252 L970.273,1094.154 Z" class="cls-1"/>
              <path d="M551.914,726.727 L551.914,723.038 L729.735,723.038 L729.735,726.727 L551.914,726.727 Z" class="cls-1"/>
              <path d="M553.389,1094.154 L549.700,1094.154 L549.700,725.252 L553.389,725.252 L553.389,1094.154 Z" class="cls-1"/>
              <path d="M968.797,885.355 L968.797,889.044 L862.547,889.044 L862.547,885.355 L968.797,885.355 Z" class="cls-1"/>
              <path d="M663.329,885.355 L663.329,889.044 L551.914,889.044 L551.914,885.355 L663.329,885.355 Z" class="cls-1"/>
            </g>
            <g id='databus8'>
              <path d="M1733.945,1083.087 L1730.256,1083.087 L1730.256,942.904 L1733.945,942.904 L1733.945,1083.087 Z" class="cls-1"/>
              <path d="M1731.731,33.191 L1731.731,36.880 L35.421,36.880 L35.421,33.191 L1731.731,33.191 Z" class="cls-1"/>
              <path d="M33.207,35.404 L36.896,35.404 L36.896,1083.087 L33.207,1083.087 L33.207,35.404 Z" class="cls-1"/>
              <path d="M35.421,1084.562 L35.421,1080.873 L1731.731,1080.873 L1731.731,1084.562 L35.421,1084.562 Z" class="cls-1"/>
              <path d="M1733.945,167.471 L1730.256,167.471 L1730.256,35.404 L1733.945,35.404 L1733.945,167.471 Z" class="cls-1"/>
              <path d="M302.521,1083.087 L298.832,1083.087 L298.832,852.892 L302.521,852.892 L302.521,1083.087 Z" class="cls-1"/>
              <path d="M225.047,35.404 L228.737,35.404 L228.737,163.782 L225.047,163.782 L225.047,35.404 Z" class="cls-1"/>
              <path d="M376.306,163.782 L372.617,163.782 L372.617,35.404 L376.306,35.404 L376.306,163.782 Z" class="cls-1"/>
              <path d="M955.516,736.319 L959.205,736.319 L959.205,1083.087 L955.516,1083.087 L955.516,736.319 Z" class="cls-1"/>
              <path d="M796.141,737.794 L796.141,734.105 L957.730,734.105 L957.730,737.794 L796.141,737.794 Z" class="cls-1"/>
              <path d="M560.768,736.319 L564.457,736.319 L564.457,1083.087 L560.768,1083.087 L560.768,736.319 Z" class="cls-1"/>
              <path d="M729.735,734.105 L729.735,737.794 L562.981,737.794 L562.981,734.105 L729.735,734.105 Z" class="cls-1"/>
              <path d="M862.547,900.111 L862.547,896.422 L957.730,896.422 L957.730,900.111 L862.547,900.111 Z" class="cls-1"/>
              <path d="M562.981,900.111 L562.981,896.422 L663.329,896.422 L663.329,900.111 L562.981,900.111 Z" class="cls-1"/>
            </g>
            <g id='databus16'>
              <path d="M1719.188,942.904 L1722.877,942.904 L1722.877,1072.020 L1719.188,1072.020 L1719.188,942.904 Z" class="cls-1"/>
              <path d="M1720.664,44.258 L1720.664,47.947 L46.488,47.947 L46.488,44.258 L1720.664,44.258 Z" class="cls-1"/>
              <path d="M47.964,1072.020 L44.275,1072.020 L44.275,46.471 L47.964,46.471 L47.964,1072.020 Z" class="cls-1"/>
              <path d="M1720.664,1069.806 L1720.664,1073.495 L46.488,1073.495 L46.488,1069.806 L1720.664,1069.806 Z" class="cls-1"/>
              <path d="M1719.188,46.471 L1722.877,46.471 L1722.877,167.471 L1719.188,167.471 L1719.188,46.471 Z" class="cls-1"/>
              <path d="M287.765,852.892 L291.454,852.892 L291.454,1072.020 L287.765,1072.020 L287.765,852.892 Z" class="cls-1"/>
              <path d="M217.669,163.782 L213.980,163.782 L213.980,46.471 L217.669,46.471 L217.669,163.782 Z" class="cls-1"/>
              <path d="M361.549,46.471 L365.238,46.471 L365.238,163.782 L361.549,163.782 L361.549,46.471 Z" class="cls-1"/>
              <path d="M946.662,745.172 L946.662,748.861 L796.141,748.861 L796.141,745.172 L946.662,745.172 Z" class="cls-1"/>
              <path d="M948.138,1072.020 L944.449,1072.020 L944.449,747.386 L948.138,747.386 L948.138,1072.020 Z" class="cls-1"/>
              <path d="M571.836,747.386 L575.525,747.386 L575.525,1072.020 L571.836,1072.020 L571.836,747.386 Z" class="cls-1"/>
              <path d="M729.735,745.172 L729.735,748.861 L574.049,748.861 L574.049,745.172 L729.735,745.172 Z" class="cls-1"/>
              <path d="M946.662,907.489 L946.662,911.178 L862.547,911.178 L862.547,907.489 L946.662,907.489 Z" class="cls-1"/>
              <path d="M663.329,907.489 L663.329,911.178 L574.049,911.178 L574.049,907.489 L663.329,907.489 Z" class="cls-1"/>
            </g>
            <g id='databus32'>
              <path d="M1711.809,1060.953 L1708.120,1060.953 L1708.120,942.904 L1711.809,942.904 L1711.809,1060.953 Z" class="cls-1"/>
              <path d="M57.556,59.014 L57.556,55.325 L1709.596,55.325 L1709.596,59.014 L57.556,59.014 Z" class="cls-1"/>
              <path d="M59.032,1060.953 L55.343,1060.953 L55.343,57.538 L59.032,57.538 L59.032,1060.953 Z" class="cls-1"/>
              <path d="M57.556,1062.428 L57.556,1058.739 L1709.596,1058.739 L1709.596,1062.428 L57.556,1062.428 Z" class="cls-1"/>
              <path d="M1711.809,167.471 L1708.120,167.471 L1708.120,57.538 L1711.809,57.538 L1711.809,167.471 Z" class="cls-1"/>
              <path d="M280.386,1060.953 L276.697,1060.953 L276.697,852.892 L280.386,852.892 L280.386,1060.953 Z" class="cls-1"/>
              <path d="M202.912,57.538 L206.601,57.538 L206.601,163.782 L202.912,163.782 L202.912,57.538 Z" class="cls-1"/>
              <path d="M354.171,163.782 L350.481,163.782 L350.481,57.538 L354.171,57.538 L354.171,163.782 Z" class="cls-1"/>
              <path d="M933.381,758.453 L937.070,758.453 L937.070,1060.953 L933.381,1060.953 L933.381,758.453 Z" class="cls-1"/>
              <path d="M796.141,759.928 L796.141,756.239 L935.594,756.239 L935.594,759.928 L796.141,759.928 Z" class="cls-1"/>
              <path d="M585.117,759.928 L585.117,756.239 L729.735,756.239 L729.735,759.928 L585.117,759.928 Z" class="cls-1"/>
              <path d="M586.593,1060.953 L582.903,1060.953 L582.903,758.453 L586.593,758.453 L586.593,1060.953 Z" class="cls-1"/>
              <path d="M862.547,922.245 L862.547,918.556 L935.594,918.556 L935.594,922.245 L862.547,922.245 Z" class="cls-1"/>
              <path d="M585.117,922.245 L585.117,918.556 L663.329,918.556 L663.329,922.245 L585.117,922.245 Z" class="cls-1"/>
            </g>
            <g id='databus64'>
              <path d="M1697.052,942.904 L1700.742,942.904 L1700.742,1049.886 L1697.052,1049.886 L1697.052,942.904 Z" class="cls-1"/>
              <path d="M1698.528,66.392 L1698.528,70.081 L68.624,70.081 L68.624,66.392 L1698.528,66.392 Z" class="cls-1"/>
              <path d="M70.099,1049.886 L66.410,1049.886 L66.410,68.605 L70.099,68.605 L70.099,1049.886 Z" class="cls-1"/>
              <path d="M1698.528,1047.672 L1698.528,1051.361 L68.624,1051.361 L68.624,1047.672 L1698.528,1047.672 Z" class="cls-1"/>
              <path d="M1700.742,167.471 L1697.052,167.471 L1697.052,68.605 L1700.742,68.605 L1700.742,167.471 Z" class="cls-1"/>
              <path d="M265.629,852.892 L269.318,852.892 L269.318,1049.886 L265.629,1049.886 L265.629,852.892 Z" class="cls-1"/>
              <path d="M191.844,68.605 L195.533,68.605 L195.533,163.782 L191.844,163.782 L191.844,68.605 Z" class="cls-1"/>
              <path d="M339.414,68.605 L343.103,68.605 L343.103,163.782 L339.414,163.782 L339.414,68.605 Z" class="cls-1"/>
              <path d="M924.527,767.306 L924.527,770.995 L796.141,770.995 L796.141,767.306 L924.527,767.306 Z" class="cls-1"/>
              <path d="M926.002,1049.886 L922.313,1049.886 L922.313,769.520 L926.002,769.520 L926.002,1049.886 Z" class="cls-1"/>
              <path d="M596.184,770.995 L596.184,767.306 L729.735,767.306 L729.735,770.995 L596.184,770.995 Z" class="cls-1"/>
              <path d="M597.660,1049.886 L593.971,1049.886 L593.971,769.520 L597.660,769.520 L597.660,1049.886 Z" class="cls-1"/>
              <path d="M924.527,929.623 L924.527,933.312 L862.547,933.312 L862.547,929.623 L924.527,929.623 Z" class="cls-1"/>
              <path d="M663.329,929.623 L663.329,933.312 L596.184,933.312 L596.184,929.623 L663.329,929.623 Z" class="cls-1"/>
            </g>
            <g id='databus128'>
              <path d="M1689.674,1038.819 L1685.985,1038.819 L1685.985,942.904 L1689.674,942.904 L1689.674,1038.819 Z" class="cls-1"/>
              <path d="M79.692,81.148 L79.692,77.459 L1687.461,77.459 L1687.461,81.148 L79.692,81.148 Z" class="cls-1"/>
              <path d="M77.478,79.672 L81.167,79.672 L81.167,1038.819 L77.478,1038.819 L77.478,79.672 Z" class="cls-1"/>
              <path d="M1687.461,1036.605 L1687.461,1040.294 L79.692,1040.294 L79.692,1036.605 L1687.461,1036.605 Z" class="cls-1"/>
              <path d="M1685.985,79.672 L1689.674,79.672 L1689.674,167.471 L1685.985,167.471 L1685.985,79.672 Z" class="cls-1"/>
              <path d="M258.251,1038.819 L254.561,1038.819 L254.561,852.892 L258.251,852.892 L258.251,1038.819 Z" class="cls-1"/>
              <path d="M184.466,163.782 L180.777,163.782 L180.777,79.672 L184.466,79.672 L184.466,163.782 Z" class="cls-1"/>
              <path d="M332.035,163.782 L328.346,163.782 L328.346,79.672 L332.035,79.672 L332.035,163.782 Z" class="cls-1"/>
              <path d="M911.245,780.587 L914.934,780.587 L914.934,1038.819 L911.245,1038.819 L911.245,780.587 Z" class="cls-1"/>
              <path d="M796.141,782.062 L796.141,778.373 L913.459,778.373 L913.459,782.062 L796.141,782.062 Z" class="cls-1"/>
              <path d="M605.039,780.587 L608.728,780.587 L608.728,1038.819 L605.039,1038.819 L605.039,780.587 Z" class="cls-1"/>
              <path d="M729.735,778.373 L729.735,782.062 L607.252,782.062 L607.252,778.373 L729.735,778.373 Z" class="cls-1"/>
              <path d="M862.547,944.380 L862.547,940.691 L913.459,940.691 L913.459,944.380 L862.547,944.380 Z" class="cls-1"/>
              <path d="M663.329,940.691 L663.329,944.380 L607.252,944.380 L607.252,940.691 L663.329,940.691 Z" class="cls-1"/>
            </g>
          </g>
        </svg>
      
      </div>
      <div class='code'></div>
    </div>
    <div class='graph'>
      <div class='divider'>
        <div></div>
      </div>
      <div class='processes'></div>
    </div>
  </div>
</simulator>


<script>
(function(){
  
  
  var groupStack = [];
  console.group = function Group(header){
    var group = document.createElement('group');
    
    var triangle = document.createElement('triangle');
    
    var h1 = document.createElement('h1');
    h1.appendChild(triangle);
    h1.appendChild(document.createTextNode(header));
    
    h1.addEventListener('click', function ToggleGroup(){
      if(group.getAttribute('class') === 'collapsed')
        group.removeAttribute('class');
      else
        group.setAttribute('class', 'collapsed');
    });
    
    var autoscroll = AutoScrollConsoleClosure();
    group.appendChild(h1);
    document.querySelector('simulator .processes').appendChild(group);
    autoscroll();
    
    groupStack.push(group);
  }
  console.groupEnd = function GroupEnd(){
    groupStack.pop();
  }
  console.info = function Info(text){
    var h2 = document.createElement('h2');
    h2.innerHTML = text;
    
    var autoscroll = AutoScrollConsoleClosure();
    groupStack[groupStack.length-1].appendChild(h2);
    autoscroll();
  }
  console.clear = function Clear(){
    document.querySelector('simulator .processes').innerHTML = '';
  }
  function AutoScrollConsoleClosure(){
    var frame = document.querySelector('simulator .processes');
    
    if(frame.scrollTop + frame.offsetHeight === frame.scrollHeight)
      return function(){frame.scrollTop = frame.scrollHeight;}
    else
      return new Function();
  }
  function ClearConsole(){}
  
  var WIRES = [
    'databus1'  ,
    'databus2'  ,
    'databus4'  ,
    'databus8'  ,
    'databus16' ,
    'databus32' ,
    'databus64' ,
    'databus128',

    'instbus1'  ,
    'instbus2'  ,
    'instbus4'  ,
    'instbus8'  ,
    'instbus16' ,

    'instruction1'  ,
    'instruction2'  ,
    'instruction4'  ,
    'instruction8'  ,
    'instruction16' ,

    'ramadd1'   ,
    'ramadd2'   ,
    'ramadd4'   ,
    'ramadd8'   ,
    'ramadd16'  ,
    'ramadd32'  ,
    'ramadd64'  ,
    'ramadd128' ,
    
    'aluout1'   ,
    'aluout2'   ,
    'aluout4'   ,
    'aluout8'   ,
    'aluout16'  ,
    'aluout32'  ,
    'aluout64'  ,
    'aluout128' ,

    'acc1'   ,
    'acc2'   ,
    'acc4'   ,
    'acc8'   ,
    'acc16'  ,
    'acc32'  ,
    'acc64'  ,
    'acc128' ,

    'temp1'   ,
    'temp2'   ,
    'temp4'   ,
    'temp8'   ,
    'temp16'  ,
    'temp32'  ,
    'temp64'  ,
    'temp128' ,
    
    'alucontrol1',
    'alucontrol2',
    'alucontrol4',
    'alucontrol8',
    
    'aluflags1' ,
    'aluflags2' ,
    'aluflags4' ,
    'aluflags8' ,
    'aluflags16',
    'aluflags32',
    
    'flagsregister1' ,
    'flagsregister2' ,
    'flagsregister4' ,
    'flagsregister8' ,
    'flagsregister16',
    'flagsregister32',
    
    'incr1'   ,
    'incr2'   ,
    'incr4'   ,
    'incr8'   ,
    'incr16'  ,
    'incr32'  ,
    'incr64'  ,
    'incr128' ,
    
    'increnable',
    'tempipset',
    'ipenable',
    'ipset',
    'accset',
    'tempset',
    'aluoutset',
    'aluoutenable',
    'flagsset',
    'instructionset',
    'ramenable',
    'ramset',
    'ramaddset'
  ];
  var wires = {};
  
  window.addEventListener('load', Init);
  function Init(){
    LoadDivider();
    
    LoadWires();
    FormAllPlaygrounds();
  }
  function LoadWires(){
    wires = {};
    for(var i=0,wire; wire=WIRES[i++];)
      wires[wire] = new WireImage(wire);
  }
  
  function LoadDivider(){
    var divider = document.querySelector('simulator .graph .divider');
    divider.addEventListener('mousedown', DividerMouseDown);
  }
  function DividerMouseDown(){
    window.addEventListener('mousemove', DividerMouseMove);
    window.addEventListener('mouseup', DividerMouseUp);
  }
  function DividerMouseMove(event){
    var graph = document.querySelector('simulator .graph');
    
    var dx = event.movementX;
    
    graph.style.width = (graph.offsetWidth - dx) + 'px';
  }
  function DividerMouseUp(){
    window.removeEventListener('mousemove', DividerMouseMove);
    window.removeEventListener('mouseup', DividerMouseUp);
  }
  
  
  function FormAllPlaygrounds(){
    var playgrounds = document.querySelectorAll('playground');
    
    for(var i=0,playground; playground=playgrounds[i++];)
      new Playground(playground);
  }
  
  
  function Playground(){
    var self = this;
    var undefined;
    
    
    var frame;
    
    var rendered = {
      lines: [],
      table: null,
      menu: null,
      info: null,
      accumulator: null
    }
    
    var executionLine = 0;
    var code = [];
    
    var simulator;
    var isRunning = false;
    var isSimulating = false;
    var canViewMachineCode = false;
    var isShowingCatalog = false;
    var originalParent;
    
    var buttons = {};
    
    
    function CreateTable(){
      var table = document.createElement('div');
      table.setAttribute('class', 'table');
      
      rendered.table = table;
    }
    function InterpretCode(){
      rendered.lines = [];
      for(var i=0; i<code.length; i++){
        var line = document.createElement('line');
        var lineText = code[i];
        var byteCode = PaddedMachineCode(lineText)[0];
      
        var number = document.createElement('num');
        number.innerHTML = i+1;
      
        var text = document.createElement('text');
        text.innerHTML = lineText;
      
        var error = document.createElement('error');
        InterpretLine(lineText, function(err){
          if(!err) return;
          error.innerHTML = err;
          line.setAttribute('class', 'error');
        });
        
        var byte = document.createElement('bytecode');
        byte.innerHTML = byteCode;
      
        line.appendChild(number);
        line.appendChild(text);
        line.appendChild(error);
        line.appendChild(byte);
        rendered.table.appendChild(line);
        rendered.lines.push(line);
      }
    }
    function FormMenu(){
      var menu = document.createElement('div');
      menu.setAttribute('class', 'menu');
    
      buttons.run     = FormMenuButton(menu, 'Run', RunStopSimulator);
      buttons.step    = FormMenuButton(menu, 'Step Forward', StepSimulator);
      buttons.reset   = FormMenuButton(menu, 'Reset', ResetSimulator);
      buttons.catalog = FormMenuButton(menu, 'View Catalog', ToggleCatalog);
      buttons.bytes   = FormMenuButton(menu, 'View Machine Code', ViewHideMachineCode);
      buttons.viewsim = FormMenuButton(menu, 'View Simulation', HideShowSimulator);
    
      rendered.menu = menu;
    }
    function FormMenuButton(menu, title, listener){
      var item = document.createElement('item');
      item.innerHTML = title;
      item.addEventListener('click', listener);
      menu.appendChild(item);
      return item;
    }
    function FormAccumulatorReadout(){
      var info = document.createElement('div');
      info.setAttribute('class', 'info');
      
      accumulator = document.createElement('div')
      accumulator.setAttribute('class', 'item accumulator');
      
      info.appendChild(accumulator);
      
      rendered.info = info;
      rendered.accumulator = accumulator;
      
      UpdateAccumulator();
    }
    function RenderPlayground(){
      frame.innerHTML = '';
      frame.appendChild(rendered.menu);
      frame.appendChild(rendered.table);
      frame.appendChild(rendered.info);
    }
    
    function StepSimulator(){
      simulator.step();
    }
    function ResetSimulator(){
      RemoveExecutionLine();
      StopSimulator();
      simulator.stop();
      simulator.reset();
      console.clear();
    }
    function RunStopSimulator(){
      if(isRunning) StopSimulator();
      else RunSimulator();
    }
    function StopSimulator(){
      isRunning = false;
      buttons.run.innerHTML = 'Run';
      simulator.stop();
    }
    function RunSimulator(){
      isRunning = true;
      buttons.run.innerHTML = 'Stop';
      simulator.run(50);
    }
    function HideShowSimulator(){
      ResetSimulator();
      if(isSimulating) HideSimulation();
      else ShowSimulation();
    }
    function ShowSimulation(){
      buttons.viewsim.innerHTML = 'Hide Simulation';
      
      var simElement = document.querySelector('simulator');
      var codeElement = simElement.querySelector('.code');
      
      originalParent.removeChild(frame);
      isSimulating = true;
      
      codeElement.appendChild(frame);
      
      simElement.setAttribute('class', 'shown');
    }
    function HideSimulation(){
      buttons.viewsim.innerHTML = 'Show Simulation';
      
      var simElement = document.querySelector('simulator');
      
      frame.parentElement.removeChild(frame);
      originalParent.appendChild(frame);
      isSimulating = false;
      
      simElement.removeAttribute('class');
    }
    function ToggleCatalog(){
      if(isShowingCatalog) HideCatalog();
      else ShowCatalog();
    }
    function HideCatalog(){
      isShowingCatalog = false;
      
      buttons.catalog.innerHTML = 'View Catalog';
      
      var catalog = document.querySelector('catalog');
      catalog.parentElement.removeChild(catalog);
      document.body.appendChild(catalog);
    }
    function ShowCatalog(){
      isShowingCatalog = true;
      
      buttons.catalog.innerHTML = 'Hide Catalog';
      
      var catalog = document.querySelector('catalog');
      catalog.parentElement.removeChild(catalog);
      frame.appendChild(catalog);
    }
    
    function OnClock(){
      UpdateAccumulator();
      UpdateExecutionLine();
    }
    function RemoveExecutionLine(){
      rendered.lines[executionLine].removeAttribute('class');
    }
    function UpdateExecutionLine(){
      RemoveExecutionLine();
      executionLine = simulator.getExecutionLine();
      rendered.lines[executionLine].setAttribute('class', 'running');
    }
    function UpdateAccumulator(){
      rendered.accumulator.innerHTML = simulator.getAccumulator();
    }
    
    function ViewHideMachineCode(){
      if(canViewMachineCode) HideMachineCode();
      else ShowMachineCode();
    }
    function ShowMachineCode(){
      canViewMachineCode = true;
      frame.setAttribute('class', 'showByteCode');
      buttons.bytes.innerHTML = 'Hide Machine Code';
    }
    function HideMachineCode(){
      canViewMachineCode = false;
      frame.removeAttribute('class');
      buttons.bytes.innerHTML = 'View Machine Code';
    }
    
    function GetCodeFromPlayground(){
      var lines = frame.querySelectorAll('line');
      var code = [];
    
      for(var i=0; i<lines.length; i++)
        code.push(lines[i].innerHTML);
    
      return code;
    }
    
    
    (function Constructor(element){
      frame = element;
      
      originalParent = document.createElement('div');
      frame.parentElement.insertBefore(originalParent, frame.nextSibling);
      frame.parentElement.removeChild(frame);
      originalParent.appendChild(frame);
      
      code = GetCodeFromPlayground();
      simulator = new Simulator(code.join('\n'), wires);
      simulator.addEventListener('clock', OnClock);
      
      CreateTable();
      InterpretCode();
      FormMenu();
      FormAccumulatorReadout();
      RenderPlayground();
    }).apply(self, arguments);
  }
  
  
  
  
  
  function WireImage(){
    var self = this;
    
    
    var group;
    
    
    self.on = SetOn;
    self.off = SetOff;
    
    
    function SetOn(){
      SetColor('rgb(255,216,0)');
    }
    function SetOff(){
      SetColor('rgb(0,0,0)');
    }
    
    
    function SetColor(color){
      var children = group.children;
      for(var i=0,child; child=children[i++];)
        child.style.fill = color;
    }
    
    
    (function Constructor(identifier){
      group = document.getElementById(identifier);
    }).apply(self, arguments);
  }
  
})();
</script>
<body>
</html>